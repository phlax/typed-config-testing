{"$schema": "http://json-schema.org/draft-04/schema#", "properties": {"source_address": {"properties": {"protocol": {"enum": ["TCP", 0, "UDP", 1], "oneOf": [{"type": "string"}, {"type": "integer"}]}, "address": {"type": "string", "description": "The address for this socket. :ref:`Listeners <config_listeners>` will bind\n to the address. An empty address is not allowed. Specify ``0.0.0.0`` or ``::``\n to bind to any address. [#comment:TODO(zuercher) reinstate when implemented:\n It is possible to distinguish a Listener address via the prefix/suffix matching\n in :ref:`FilterChainMatch <envoy_api_msg_listener.FilterChainMatch>`.] When used\n within an upstream :ref:`BindConfig <envoy_api_msg_core.BindConfig>`, the address\n controls the source address of outbound connections. For :ref:`clusters\n <envoy_api_msg_Cluster>`, the cluster type determines whether the\n address must be an IP (*STATIC* or *EDS* clusters) or a hostname resolved by DNS\n (*STRICT_DNS* or *LOGICAL_DNS* clusters). Address resolution can be customized\n via :ref:`resolver_name <envoy_api_field_core.SocketAddress.resolver_name>`."}, "port_value": {"type": "integer"}, "named_port": {"type": "string", "description": "This is only valid if :ref:`resolver_name\n <envoy_api_field_core.SocketAddress.resolver_name>` is specified below and the\n named resolver is capable of named port resolution."}, "resolver_name": {"type": "string", "description": "The name of the custom resolver. This must have been registered with Envoy. If\n this is empty, a context dependent default applies. If the address is a concrete\n IP address, no resolution will occur. If address is a hostname this\n should be set for resolution other than DNS. Specifying a custom resolver with\n *STRICT_DNS* or *LOGICAL_DNS* will generate an error at runtime."}, "ipv4_compat": {"type": "boolean", "description": "When binding to an IPv6 address above, this enables `IPv4 compatibility\n <https://tools.ietf.org/html/rfc3493#page-11>`_. Binding to ``::`` will\n allow both IPv4 and IPv6 connections, with peer IPv4 addresses mapped into\n IPv6 space as ``::FFFF:<IPv4-address>``."}}, "additionalProperties": true, "type": "object", "description": "The address to bind to when creating a socket."}, "freebind": {"additionalProperties": true, "type": "boolean", "description": "Whether to set the *IP_FREEBIND* option when creating the socket. When this\n flag is set to true, allows the :ref:`source_address\n <envoy_api_field_UpstreamBindConfig.source_address>` to be an IP address\n that is not configured on the system running Envoy. When this flag is set\n to false, the option *IP_FREEBIND* is disabled on the socket. When this\n flag is not set (default), the socket is not modified, i.e. the option is\n neither enabled nor disabled."}, "socket_options": {"items": {"$schema": "http://json-schema.org/draft-04/schema#", "properties": {"description": {"type": "string", "description": "An optional name to give this socket option for debugging, etc.\n Uniqueness is not required and no special meaning is assumed."}, "level": {"type": "string", "description": "Corresponding to the level value passed to setsockopt, such as IPPROTO_TCP"}, "name": {"type": "string", "description": "The numeric name as passed to setsockopt"}, "int_value": {"type": "string", "description": "Because many sockopts take an int value."}, "buf_value": {"type": "string", "description": "Otherwise it's a byte buffer."}, "state": {"enum": ["STATE_PREBIND", 0, "STATE_BOUND", 1, "STATE_LISTENING", 2], "oneOf": [{"type": "string"}, {"type": "integer"}], "description": "The state in which the option will be applied. When used in BindConfig\n STATE_PREBIND is currently the only valid value."}}, "additionalProperties": true, "type": "object", "description": "[#protodoc-title: Socket Option ]\n\nGeneric socket option message. This would be used to set socket options that\n might not exist in upstream kernels or precompiled Envoy binaries.\n [#next-free-field: 7]"}, "type": "array", "description": "Additional socket options that may not be present in Envoy source code or\n precompiled binaries."}}, "additionalProperties": true, "type": "object"}